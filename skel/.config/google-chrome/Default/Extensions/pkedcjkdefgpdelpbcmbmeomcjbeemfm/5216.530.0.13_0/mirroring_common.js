'use strict';var $g;m("mr.IssueSeverity",{G9:"fatal",uba:"warning",O$:"notification"},void 0);m("mr.IssueAction",{t9:"dismiss",w$:"learn_more"},void 0);var ah=function(a,b,c){this.routeId=null;this.severity=b;this.isBlocking="fatal"==this.severity?!0:!1;this.title=a;this.message=null;this.defaultAction=c;this.helpPageId=this.secondaryActions=null};ah.prototype.V3=function(a){this.helpPageId=a;return this};ah.prototype.w5=function(a){this.secondaryActions=a;return this};
ah.prototype.b4=function(a){if(!a&&"fatal"==this.severity)throw Error("All FATAL issues must be blocking.");this.isBlocking=a;return this};var bh=function(a){this.Ib=a;this.$k=t()},ch=C("mr.Timing");bh.prototype.Iu=function(a,b){null!=b&&(a+="_"+b);return a};bh.prototype.Rk=function(a){this.Ib=a};bh.prototype.end=function(a){var b=t()-this.$k;dh(this.Iu(this.Ib,a),b)};var dh=function(a,b){0>b&&(E(ch,"Timing analytics event with negative time"),b=0);1E4<b&&(b=1E4);try{chrome.metricsPrivate.recordTime(a,b)}catch(c){E(ch,"Failed to record time "+b+" in "+a)}},eh=function(a){bh.call(this,a)};u(eh,bh);var fh=C("mr.MediumTiming");
eh.prototype.end=function(a){var b=t()-this.$k;a=this.Iu(this.Ib,a);if(0>b)E(fh,"Timing analytics event with negative time");else{1E4>b&&(b=1E4);18E4<b&&(b=18E4);try{chrome.metricsPrivate.recordMediumTime(a,b)}catch(c){E(fh,"Failed to record time "+b+" in "+a)}}};var gh=function(a){bh.call(this,a)};u(gh,bh);var hh=C("mr.LongTiming");
gh.prototype.end=function(a){var b=t()-this.$k;a=this.Iu(this.Ib,a);if(0>b)E(hh,"Timing analytics event with negative time");else{18E4>b&&(b=18E4);36E5<b&&(b=36E5);try{chrome.metricsPrivate.recordLongTime(a,b)}catch(c){E(hh,"Failed to record time "+b+" in "+a)}}};
var ih=C("mr.Analytics"),jh=function(a){try{chrome.metricsPrivate.recordUserAction(a)}catch(b){E(ih,"Failed to record event "+a)}},kh=function(a,b,c){var e,f=0,g;for(g in c)f++,c[g]==b&&(e=g);if(l(e)){c={metricName:a,type:"histogram-linear",min:1,max:f,buckets:f+1};try{chrome.metricsPrivate.recordValue(c,b)}catch(k){E(ih,"Failed to record enum value "+e+" ("+b+") in "+a,k)}}else D(ih,"Unknown analytics value, "+b+" for histogram, "+a,Error())};var lh={Z8:0,X8:1,b9:2,Y8:3,F8:4,a9:5,b$:6,$aa:7,p9:8,qz:9},mh=function(a){kh("MediaRouter.Mirror.Capturing.Failure",a,lh)};var nh=function(){return null!=hc&&-1!=hc.indexOf("CrOS")},oh=function(){var a=hc;if(!n(a))return!1;a=a.match(/Windows NT \d+.\d+/);if(null===a||!Ca(a))return!1;a=a[0];a=a.match(/\d+.\d+/);if(null===a||!Ca(a))return!1;a=a[0];return 6.2<=parseFloat(a)},ph=function(){return nh()?"ChromeOS":dd?"Windows":cd?"Mac":ed?"Linux":"Other"};var qh=function(a){this.Xi=a;this.ld=this.Tm=null;this.a=C("mr.mirror.MediaStream")},rh={message:"empty-stream"};d=qh.prototype;d.P4=function(a){this.Tm=a};d.oC=function(){return this.Xi};d.start=function(){return this.Xi.JE()?this.K6():this.B6()};
d.K6=function(){var a=this.Xi.$J();F(this.a,"Starting tab capture with constraints "+JSON.stringify(a));return(new ie(function(b,c){chrome.tabCapture.capture(a,function(a){a?(this.sJ(a),b(this)):c(Error(chrome.runtime.lastError&&chrome.runtime.lastError.message?chrome.runtime.lastError.message:rh))}.bind(this));df(function(){c(Error("chrome.tabCapture.capture failed to call its callback"))},5E3,this)},this)).na(function(a){this.aG(a)},this)};
d.hW=function(a){a&&F(this.a,"Track "+JSON.stringify(a.target)+" ended");this.stop()};d.aG=function(a){var b="";a.name&&(b=a.name);a.message&&(b&&(b+="-"),b+=a.message);a=this.Xi.At;"tab"==a&&"empty_stream"==b?mh(0):"desktop"==a&&"Error-timeout"==b?mh(1):"desktop"==a&&"Error-user_cancel"==b?mh(3):"tab"==a&&"Error-timeout"==b?mh(5):mh(9);throw Error("Failed to capture "+this.Xi.At);};
d.B6=function(){return(new ie(function(a,b){var c=["screen"];"Linux"==ph()&&c.push("window");var e=chrome.desktopCapture.chooseDesktopMedia(c,a);df(function(){chrome.desktopCapture.cancelChooseDesktopMedia(e);b(Error("timeout"))},6E4,this)},this)).then(function(a){var b=this.Xi.$J(a);F(this.a,"Starting desktop capture with constraints "+JSON.stringify(b));return new ie(function(a,e){navigator.webkitGetUserMedia(b,a,e)})},null,this).then(function(a){if(a)this.sJ(a);else throw Error(rh);return this},
null,this).na(function(a){this.aG(a)},this)};d.sJ=function(a){this.ld=a;a.getTracks().forEach(function(a){a.onended=this.hW.bind(this)},this)};d.stop=function(){this.ld&&(this.ld.getTracks().forEach(function(a){a.onended=null;a.stop()}),this.ld=null,this.Tm&&this.Tm())};var th=function(a){return sh(a)||"urn:x-org.chromium.media:source:desktop"==a},uh=["https://docs.google.com"],sh=function(a){return Ma(a,"urn:x-org.chromium.media:source:tab:")||-1!=a.indexOf("0F5096E8")};var vh=function(a){return(new ie(function(b){chrome.tabs.get(a,b)})).then(function(b){if(!b)throw Error("No such tab "+a);return b})};var wh=chrome.i18n.getMessage("1639753794700094338");var xh=function(a,b){ve.call(this);this.I2=a;this.Th=b;this.fh=this.Pa=null;this.m=C("mr.mirror.Service."+a);this.zG=r(this.fW,this);this.zl=!1};u(xh,ve);d=xh.prototype;d.getName=function(){return this.I2};d.Pn=function(a,b,c,e){F(this.m,"Start mirroring on route "+a.id);return sh(b)?vh(a.qe.tabId).then(function(){return this.pB(a,b,c,e)},function(a){this.rF(a);throw a;},this):this.pB(a,b,c,e)};
d.pB=function(a,b,c,e){var f=this.Gj(b,c);return this.QJ().then(function(){return(new qh(f.oC())).start()}).then(function(b){this.fh=b;b.P4(r(this.Tm,this,b));return e?e(a):a},null,this).then(function(a){this.Pa=this.Pt(f,a);return this.Pa.start(this.fh.ld)},null,this).then(function(){f.KE()?(chrome.tabs.onUpdated.addListener(this.zG),this.Pa.O7(a.qe.tabId).then(this.Pa.Hx.bind(this.Pa),function(a){D(this.m,"Failed to obtain initial tab info.",a)},this),this.kx()):(this.Pa.UI("Capturing Desktop",
"Capturing Desktop",null),this.gx(),this.Pa.Hx());this.dO(c,this.fh);return this.Pa.Fa},null,this).na(function(a){this.rF(a);this.Kf();throw a;},this)};d.rF=function(a){var b="";a.name&&(b=a.name);a.message&&(b&&(b+="-"),b+=a.message);b||(b="Error-unknown");this.ix(b)};d.Tm=function(a){this.fh==a&&(this.jx(),this.Kf())};d.QJ=function(){return this.Kf().then(function(a){a&&this.hx();return a},null,this)};
d.Kf=function(){if(this.zl)return H(!1);this.zl=!0;chrome.tabs.onUpdated.removeListener(this.zG);this.fh&&(this.fh.stop(),this.fh=null);if(this.Pa)return this.bA().then(function(){this.Pa&&(this.Pa.stop(),this.Pa.bb(),this.Th.Dw(this.Pa.Fa.id),this.Pa=null);this.zl=!1;return!0},function(a){D(this.m,"Error cleaning up",a);this.zl=!1},this);this.zl=!1;return H(!1)};d.bA=function(){return H()};
d.fW=function(a,b,c){this.Pa&&this.Pa.tabId&&this.Pa.tabId==a&&("complete"==b.status||b.favIconUrl&&"complete"==c.status)&&(this.Pa.uK(c),this.Th.jG(this.Pa.Fa),this.Pa.Hx())};d.dO=function(a,b){a.captureAudio&&b.ld&&!b.ld.getAudioTracks().length&&this.Th.We().send(new ah(wh,"notification","dismiss"))};var yh=function(a){ve.call(this);this.Fa=a;this.uq=!1;this.tabId=this.qx=this.iconUrl=null};u(yh,ve);d=yh.prototype;d.UI=function(a,b,c){this.Fa.description=a;this.uq||this.Fa.offTheRecord?this.iconUrl=this.qx=null:(this.qx=b,this.iconUrl=c)};d.Hx=function(){this.uq||this.Fa.offTheRecord||this.$H()};d.O7=function(a){this.tabId=a;return vh(a).then(this.uK.bind(this))};
d.uK=function(a){this.uq=a.incognito;this.UI(a.title,Ma(a.url,"file://")?"Local content (Tab)":hf(a.url.match(gf)[3]||null,!0)+" (Tab)",a.favIconUrl)};d.$H=ya;d.K=function(){this.stop()};var zh=function(a,b){this.type=a;this.data=b},Ah=function(a){a=JSON.parse(a);if(!a.type)throw Error("Invalid message");return new zh(a.type,a.data)},Bh=function(a,b,c){this.settings=a;this.mediaConstraints=b;this.description=c};var Ch=function(a){this.H2=a};Ch.prototype.Hm=function(){return H(this.H2)};var Dh=function(a,b){this.width=a;this.height=b};d=Dh.prototype;d.clone=function(){return new Dh(this.width,this.height)};d.toString=function(){return"("+this.width+" x "+this.height+")"};d.TM=function(){return this.width*this.height};d.Eb=function(){return!this.TM()};d.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};d.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
d.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};d.scale=function(a,b){b=q(b)?b:a;this.width*=a;this.height*=b;return this};var Eh=!Yc&&!Wc||Wc&&9<=Number(td)||Yc&&rd("1.9.1");Wc&&rd("9");var Gh=function(a,b){Ob(b,function(b,e){"style"==e?a.style.cssText=b:"class"==e?a.className=b:"for"==e?a.htmlFor=b:Fh.hasOwnProperty(e)?a.setAttribute(Fh[e],b):Ma(e,"aria-")||Ma(e,"data-")?a.setAttribute(e,b):a[e]=b})},Fh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Hh=function(a){return a?a.parentWindow||a.defaultView:
window},Jh=function(a,b,c,e){function f(c){c&&b.appendChild(n(c)?a.createTextNode(c):c)}for(;e<c.length;e++){var g=c[e];!Da(g)||Fa(g)&&0<g.nodeType?f(g):v(Ih(g)?y(g):g,f)}},Kh=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null},Ih=function(a){if(a&&"number"==typeof a.length){if(Fa(a))return"function"==typeof a.item||"string"==typeof a.item;if(Ea(a))return"function"==typeof a.item}return!1},Lh=function(a){this.lp=a||h.document||document};d=Lh.prototype;d.setProperties=Gh;
d.createElement=function(a){return this.lp.createElement(a)};d.createTextNode=function(a){return this.lp.createTextNode(String(a))};d.getWindow=function(){var a=this.lp;return a.parentWindow||a.defaultView};d.appendChild=function(a,b){a.appendChild(b)};d.append=function(a,b){Jh(9==a.nodeType?a:a.ownerDocument||a.document,a,arguments,1)};d.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
d.removeNode=Kh;d.getChildren=function(a){return Eh&&void 0!=a.children?a.children:mb(a.childNodes,function(a){return 1==a.nodeType})};d.isElement=function(a){return Fa(a)&&1==a.nodeType};d.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
var Mh=function(a,b){this.zr=[];this.$F=a;this.eB=b||null;this.om=this.Wb=!1;this.rf=void 0;this.qy=this.YM=this.lt=!1;this.ps=0;this.xb=null;this.Ko=0};d=Mh.prototype;d.cancel=function(a){if(this.Wb)this.rf instanceof Mh&&this.rf.cancel();else{if(this.xb){var b=this.xb;delete this.xb;a?b.cancel(a):b.$M()}this.$F?this.$F.call(this.eB,this):this.qy=!0;this.Wb||this.ra(new Nh(this))}};d.$M=function(){this.Ko--;0>=this.Ko&&this.cancel()};d.WA=function(a,b){this.lt=!1;this.Ny(a,b)};
d.Ny=function(a,b){this.Wb=!0;this.rf=b;this.om=!a;this.RB()};d.wA=function(){if(this.Wb){if(!this.qy)throw new Oh(this);this.qy=!1}};d.callback=function(a){this.wA();this.Ny(!0,a)};d.ra=function(a){this.wA();this.Ny(!1,a)};d.ka=function(a,b){return this.Sg(a,null,b)};d.kc=function(a,b){return this.Sg(null,a,b)};d.uM=function(a,b){return this.Sg(a,a,b)};d.Sg=function(a,b,c){this.zr.push([a,b,c]);this.Wb&&this.RB();return this};
d.then=function(a,b,c){var e,f,g=new ie(function(a,b){e=a;f=b});this.Sg(e,function(a){a instanceof Nh?g.cancel():f(a)});return g.then(a,b,c)};fe(Mh);d=Mh.prototype;d.Bt=function(a){this.Sg(a.callback,a.ra,a);return this};d.Yz=function(a){return a instanceof Mh?this.ka(r(a.ot,a)):this.ka(function(){return a})};d.ot=function(a){var b=new Mh;this.Bt(b);a&&(b.xb=this,this.Ko++);return b};d.NW=function(a){return a instanceof Error};d.fE=function(){return nb(this.zr,function(a){return Ea(a[1])})};
d.RB=function(){if(this.ps&&this.Wb&&this.fE()){var a=this.ps,b=Ph[a];b&&(b.L1(),delete Ph[a]);this.ps=0}this.xb&&(this.xb.Ko--,delete this.xb);for(var a=this.rf,c=b=!1;this.zr.length&&!this.lt;){var e=this.zr.shift(),f=e[0],g=e[1],e=e[2];if(f=this.om?g:f)try{var k=f.call(e||this.eB,a);l(k)&&(this.om=this.om&&(k==a||this.NW(k)),this.rf=a=k);if(ge(a)||"function"===typeof h.Promise&&a instanceof h.Promise)this.lt=c=!0}catch(p){a=p,this.om=!0,this.fE()||(b=!0)}}this.rf=a;c&&(k=r(this.WA,this,!0),c=r(this.WA,
this,!1),a instanceof Mh?(a.Sg(k,c),a.YM=!0):a.then(k,c));b&&(a=new Qh(a),Ph[a.gd]=a,this.ps=a.gd)};var Rh=function(a){var b=new Mh;b.callback(a);return b},Sh=function(a){var b=new Mh;b.ra(a);return b},Oh=function(){La.call(this)};u(Oh,La);Oh.prototype.message="Deferred has already fired";Oh.prototype.name="AlreadyCalledError";var Nh=function(){La.call(this)};u(Nh,La);Nh.prototype.message="Deferred was canceled";Nh.prototype.name="CanceledError";
var Qh=function(a){this.gd=h.setTimeout(r(this.h7,this),0);this.np=a};Qh.prototype.h7=function(){delete Ph[this.gd];throw this.np;};Qh.prototype.L1=function(){h.clearTimeout(this.gd)};var Ph={};var Xh=function(a,b){var c=b||{};b=c.document||document;var e=document.createElement("SCRIPT"),f={UH:e,Un:void 0},g=new Mh(Th,f),k=null,p=null!=c.timeout?c.timeout:5E3;0<p&&(k=window.setTimeout(function(){Uh(e,!0);g.ra(new Vh(1,"Timeout reached for loading script "+a))},p),f.Un=k);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(Uh(e,c.Zca||!1,k),g.callback(null))};e.onerror=function(){Uh(e,!0,k);g.ra(new Vh(0,"Error while loading script "+
a))};f=c.attributes||{};Zb(f,{type:"text/javascript",charset:"UTF-8",src:a});Gh(e,f);Wh(b).appendChild(e);return g},Wh=function(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement},Th=function(){if(this&&this.UH){var a=this.UH;a&&"SCRIPT"==a.tagName&&Uh(a,!0,this.Un)}},Uh=function(a,b,c){null!=c&&h.clearTimeout(c);a.onload=ya;a.onerror=ya;a.onreadystatechange=ya;b&&window.setTimeout(function(){Kh(a)},0)},Vh=function(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=
": "+b);La.call(this,c);this.code=a};u(Vh,La);var Yh=function(){this.Wa=this.Th=this.jq=null;this.jw=J()};za(Yh);d=Yh.prototype;d.Hm=function(){if(this.jq)return H(this.jq);this.vX().then(null,function(){this.jw.reject(Error("Failed to load hangouts mirroring script."))},this);return this.jw.promise};d.X3=function(a){this.Wa=a};d.t4=function(a){this.Th=a};d.mH=function(a){this.Th&&(this.jq=a(this.Wa,this.Th),this.jw.resolve(this.jq))};d.vX=function(){var a=chrome.extension.getURL("mirroring_hangouts.js");return Xh(a)};var Zh="undefined"!=typeof chrome&&!!chrome.networkingPrivate&&!!chrome.networkingPrivate.setWifiTDLSEnabledState&&nh(),$h=nh()||dd;var bi=function(){this.maxWidth=1920;this.maxHeight=1080;this.minWidth=320;this.minHeight=180;this.maxFrameRate=30;this.minVideoBitrate=300;this.maxVideoBitrate=5E3;this.audioBitrate=128;this.maxLatencyMillis=800;this.animatedLatencyMillis=this.minLatencyMillis=400;this.dscpEnabled=cd||ed||nh()||oh();this.enableLogging=!0;this.useTdls=!1;this.captureAudio=this.captureVideo=!0;this.a=C("mr.mirror.Settings");var a=window.localStorage?window.localStorage.getItem(ai):null;if(n(a))try{var b=JSON.parse(a);
b&&(this.xK(b),E(this.a,"Initial mr.mirror.Settings overridden to: "+this.By()))}catch(c){throw D(this.a,ai+' must be of the form \'{"maxWidth":640, "maxHeight":360}\'.',c),Error("Overrides not parseable.  See ERROR log for details.");}},ai="mr.mirror.Settings.Overrides";d=bi.prototype;d.clone=function(){var a=new bi;a.xK(this);return a};d.By=function(){return JSON.stringify(this,function(a,b){if(0==a.length||"boolean"==typeof b||"number"==typeof b||"string"==typeof b)return b})};
d.xK=function(a){for(var b in this){var c=a[b];if(null!=c){var e=this[b];"boolean"!=typeof e&&"number"!=typeof e&&"string"!=typeof e||typeof e!=typeof c||(this[b]=c)}}};
d.iO=function(){var a=screen.width,b=screen.height;this.maxHeight*a<this.maxWidth*b?(a=Math.min(this.maxWidth,a),a-=a%160,b=90*a/160):(b=Math.min(this.maxHeight,b),b-=b%90,a=160*b/90);if(a<Math.max(160,this.minWidth)||b<Math.max(90,this.minHeight))a=Math.max(160,this.minWidth),b=Math.max(90,this.minHeight);this.maxWidth=a;this.maxHeight=b};d.pP=function(){this.minHeight=this.minWidth=0};
var ci=function(a,b){var c=new bi;c.captureAudio=a;c.captureVideo=b;c.iO();F(c.a,"mr.mirror.Settings after screen size adjustments: "+c.By());return c};bi.prototype.pT=function(){return String(this.minWidth+"x"+this.minHeight)};bi.prototype.ZS=function(){return String(this.maxWidth+"x"+this.maxHeight)};bi.prototype.pU=function(){return this.minWidth==this.maxWidth&&this.minHeight==this.maxHeight?"fixed":0<this.minWidth&&0<this.minHeight?"fixed-aspect-ratio":"variable"};var di=function(a,b){this.At=a;this.Fb=b};di.prototype.JE=function(){return"tab"==this.At};di.prototype.$J=function(a){return this.JE()?this.m7():this.l7(a)};di.prototype.m7=function(){var a={audio:this.Fb.captureAudio,video:this.Fb.captureVideo};this.Fb.captureVideo&&(a.videoConstraints={mandatory:{minWidth:this.Fb.minWidth,minHeight:this.Fb.minHeight,maxWidth:this.Fb.maxWidth,maxHeight:this.Fb.maxHeight,maxFrameRate:this.Fb.maxFrameRate,enableAutoThrottling:!0}});return a};
di.prototype.l7=function(a){var b={audio:!1,video:!1};this.Fb.captureVideo&&(b.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,minWidth:this.Fb.minWidth,minHeight:this.Fb.minHeight,maxWidth:this.Fb.maxWidth,maxHeight:this.Fb.maxHeight,maxFrameRate:this.Fb.maxFrameRate}});$h&&this.Fb.captureAudio&&(b.audio={mandatory:{chromeMediaSource:"system"}});return b};var ei=function(a,b){this.TX=a;this.Fb=b};d=ei.prototype;d.bg=function(){return this.Fb};d.oC=function(){return this.KE()?this.YU():this.IR()};d.KE=function(){return sh(this.TX)};d.YU=function(){return new di("tab",this.Fb)};d.IR=function(){return new di("desktop",this.Fb)};var fi=function(a){ve.call(this);this.v=a;this.sa={}};u(fi,ve);var gi=[];d=fi.prototype;d.listen=function(a,b,c,e){return this.jF(a,b,c,e)};d.rX=function(a,b,c,e,f){return this.jF(a,b,c,e,f)};d.jF=function(a,b,c,e,f){Ca(b)||(b&&(gi[0]=b.toString()),b=gi);for(var g=0;g<b.length;g++){var k=Qe(a,b[g],c||this.handleEvent,e||!1,f||this.v||this);if(!k)break;this.sa[k.key]=k}return this};d.Gm=function(a,b,c,e){return this.hF(a,b,c,e)};
d.hF=function(a,b,c,e,f){if(Ca(b))for(var g=0;g<b.length;g++)this.hF(a,b[g],c,e,f);else{a=Xe(a,b,c||this.handleEvent,e,f||this.v||this);if(!a)return this;this.sa[a.key]=a}return this};d.Xc=function(a,b,c,e,f){if(Ca(b))for(var g=0;g<b.length;g++)this.Xc(a,b[g],c,e,f);else c=c||this.handleEvent,f=f||this.v||this,c=Re(c),e=!!e,b=Ie(a)?a.am(b,c,e,f):a?(a=Te(a))?a.am(b,c,e,f):null:null,b&&(Ze(b),delete this.sa[b.key]);return this};
d.removeAll=function(){Ob(this.sa,function(a,b){this.sa.hasOwnProperty(b)&&Ze(a)},this);this.sa={}};d.K=function(){fi.R.K.call(this);this.removeAll()};d.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var hi=function(a){this.nk=0;this.ek=a||100;this.Ge=[]};d=hi.prototype;d.add=function(a){var b=this.Ge[this.nk];this.Ge[this.nk]=a;this.nk=(this.nk+1)%this.ek;return b};d.get=function(a){a=this.TF(a);return this.Ge[a]};d.set=function(a,b){a=this.TF(a);this.Ge[a]=b};d.N=function(){return this.Ge.length};d.Eb=function(){return 0==this.Ge.length};d.clear=function(){this.nk=this.Ge.length=0};d.A=function(){return this.CT(this.N())};
d.CT=function(a){var b=this.N(),c=[];for(a=this.N()-a;a<b;a++)c.push(this.get(a));return c};d.cb=function(){for(var a=[],b=this.N(),c=0;c<b;c++)a[c]=c;return a};d.Oa=function(a){return a<this.N()};d.ej=function(a){for(var b=this.N(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};d.TF=function(a){if(a>=this.Ge.length)throw Error("Out of bounds exception");return this.Ge.length<this.ek?a:(this.nk+Number(a))%this.ek};var ii=function(){this.oH=t()},ji=new ii;ii.prototype.set=function(a){this.oH=a};ii.prototype.reset=function(){this.set(t())};ii.prototype.get=function(){return this.oH};var ki=function(a){this.g0=a||"";this.L6=ji};d=ki.prototype;d.Pz=!0;d.oy=!0;d.r6=!0;d.q6=!0;d.Vr=!1;d.py=!1;
var mi=function(a){a=new Date(a.XJ);return li(a.getFullYear()-2E3)+li(a.getMonth()+1)+li(a.getDate())+" "+li(a.getHours())+":"+li(a.getMinutes())+":"+li(a.getSeconds())+"."+li(Math.floor(a.getMilliseconds()/10))},li=function(a){return 10>a?"0"+a:String(a)},ni=function(a,b){a=(a.XJ-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b},oi=function(a){ki.call(this,a)};u(oi,ki);
oi.prototype.VB=function(a){var b=[];b.push(this.g0," ");this.oy&&b.push("[",mi(a),"] ");this.r6&&b.push("[",ni(a,this.L6.get()),"s] ");this.q6&&b.push("[",a.sF,"] ");this.py&&b.push("[",a.Mh.name,"] ");b.push(a.getMessage());this.Vr&&(a=a.sp)&&b.push("\n",a instanceof Error?a.message:a.toString());this.Pz&&b.push("\n");return b.join("")};var pi=function(a){return(a=a.exec(hc))?a[1]:""},qi=function(){if(zf)return pi(/Firefox\/([0-9.]+)/);if(Wc||Xc||Vc)return pd;if(Df)return pi(/Chrome\/([0-9.]+)/);if(Ef&&!(Uc()||z("iPad")||z("iPod")))return pi(/Version\/([0-9.]+)/);if(Af||Bf){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(hc);if(a)return a[1]+"."+a[2]}else if(Cf)return(a=pi(/Android\s+([0-9.]+)/))?a:pi(/Version\/([0-9.]+)/);return""}();var ri=function(a,b,c,e,f,g,k){this.cd=null;this.EA=!1;this.DA=J();this.hc=[];this.rl=a?encodeURIComponent(String(a)):null;this.XB=null;!e&&b&&(this.XB=b);this.PM=c||null;this.Eo=!e;this.mp=null!=f?f:null;this.Tq=g||null;this.X7=!!k};u(ri,ve);d=ri.prototype;d.init=function(){var a=r(function(a){this.cd=a;var b=xa("client.request",a),f=xa("auth",a);b&&f?this.$D():a.load("client",r(this.$D,this))},this),b=this.MB("gapi");b?a(b.gapi):this.uX(a);return this.DA.promise};
d.MB=function(a){for(var b=window,c=xa(a,b);!c&&b!=window.top&&this.MN(b.parent,a);)b=b.parent,c=xa(a,b);return c?b:null};d.MN=function(a,b){try{return!!a&&null!=a.location.href&&ye(a,b)}catch(c){return!1}};d.uX=function(a){var b=this.MB("gapi_onload");if(b){var c=b.gapi_onload;b.gapi_onload=function(){c();a(b.gapi)}}else window.gapi_onload=function(){a(window.gapi)},Xh("https://apis.google.com/js/client.js")};
d.$D=function(){for(var a=0;a<this.hc.length;a++)this.hc[a].mb.resolve(this.cI(this.hc[a].A1));this.EA=!0;this.DA.resolve(this.cd)};d.sendRequest=function(a){if(this.EA)return this.cI(a);var b=J();this.hc.push({A1:a,mb:b});return b.promise};
d.cI=function(a){var b,c,e,f=xa("config.get",this.cd);this.Eo||(b=f("googleapis.config/auth/useFirstPartyAuth"),c=f("googleapis.config/auth/useOriginToken"));null!=this.mp&&(e=f("client/cors"));try{var g=xa("config.update",this.cd);this.Eo||(g("googleapis.config/auth/useFirstPartyAuth",!1),g("googleapis.config/auth/useOriginToken",!1));null!=this.mp&&g("client/cors",this.mp);var k=xa("client.request",this.cd),p=this.MQ();a.headers&&Zb(p,a.headers);var w={headers:p,root:this.PM,path:a.path,method:a.method,
body:a.body},B=a.params||{};this.rl&&!this.Tq?Zb(B,{key:this.rl}):this.Tq&&Zb(B,{key:null});Vb(B)||(w.params=B);var L=H(k(w));a.callback&&L.then(function(b){a.callback.apply(null,[b.result,b])},function(b){a.callback.apply(null,[b.result,b])});return L}finally{g=xa("config.update",this.cd),this.Eo||(g("googleapis.config/auth/useFirstPartyAuth",b),g("googleapis.config/auth/useOriginToken",c)),null!=this.mp&&g("client/cors",e)}};
d.MQ=function(){if(this.Eo){if(this.Tq)return{Authorization:"Bearer "+this.Tq};var a=xa("auth.getAuthHeaderValueForFirstParty",this.cd);return{Authorization:this.X7?a([]):a(),"X-Goog-AuthUser":this.XB}}return{}};
